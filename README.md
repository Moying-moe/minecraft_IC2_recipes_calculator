# IC2 recipes calculator简介

一个计算minecraft中工业2mod里物品合成的耗材的mod，由python编写，pyinstaller编译打包。

在输入了需要合成的物品名后，会给出合成路线以及总耗材

代码相当绿皮，酌情观赏。

# IC2_recipes_calc开发手册

这里是IC2合成表计算器的开发手册，在这里你可以找到一些简单的修改配置文件的方法。

关于源码的解析，你可以查看代码中的注释，或者等待作者完善这个readmd。

> 注意：此文档使用markdown语言。如果你不清楚markdown的语法，可以通过百度找到相关的工具或者教程。

---

## 根目录下文件

根目录下有3个配置文件，分别是：

 - raw.ini
 - itempanel.csv
 - oredict.csv

其中raw.ini是utf-8编码的，itempanel.csv和oredict.csv是gbk编码的（在代码之中我使用了gb18030来读取，因为gb18030是gbk的超集）。

**请不要随意的修改文件的编码！**这可能会导致程序无法正常的读取数据。

itempanel.csv和oredict.csv使用gkb编码的原因——主要是因为我使用了excel去编辑这些内容，而excel会默认的将文件的编码转化为操作系统的默认编码。

### raw.ini

raw.ini之中存储了所有的*最终材料*，一行一个，所谓最终材料，就是：当计算器计算到这个材料的时候，将会直接把它加入到总耗材之中，不做进一步计算。

*最终材料*的存在意义就是：因为在IC2之中有很多循环的生产，比如所有的矿锭都可以打粉，打粉以后可以烧成锭，而金属粉又可以变成小撮粉，小撮粉又可以合成金属粉。这会让计算器陷入死循环之中。

所以我规定了一些*最终材料*，当计算器碰到这些材料的时候，就不再进行计算了。

raw.ini中的*最终材料*可能不是很全，如果你发现了有的本应作为最终材料的物品没有被加入，可以自行加入。最好可以向我提交一下bug，方便版本更迭。

### itempanel.csv

itempanel.csv是通过NEI插件导出的，里面包括了所有的汉化信息。这个文件将物品ID（modname:itemname@metatag格式）和汉化名称联系了起来。

计算器会读取第一列、第三列和第五列，分别对应物品的基础ID、物品的meta标签、物品的汉化名。文件的第一行不会被读取

在合成表配置之中，你可以看到类似`IC2:itemCasing@2`的文本，其中@2表示它的meta标签是2。meta标签是mc的一个特性，比如几种颜色羊毛的ID是一样，区分他们的就是meta标签。另外，这一系列的物品之中，meta标签最小的（通常是0），后面的@XX可以省略。比如`IC2:itemCasing`等价于`IC2:itemCasing@0`。

### oredict.csv

在mc的mod开发中，开发者会通过一个叫OreDict的插件来整合不同mod中的相同物品，比如A mod里有铜锭，B mod里也有，这个时候就会将这两种铜锭注册成同一个OreDict的名字。

而这个文件就给出了OreDict到物品ID的映射，仍然是通过NEI导出的，内容经过了一些修改。

程序会读取第一列、第二列的@XX部分和第三列。另外文件的第一行不会被读取。

映射关系是：将"OreDict:"和第一列的字符串拼接，这个就是OreDict名称。将第三列的字符串和第二列的@XX部分拼接，就是物品的真实ID。这就建立了映射。

个人不是很建议修改这个文件，除非你确定可以解决某些bug。

## config文件夹

config文件夹存储了所有的合成表。包括：

 - 有序合成
 - 无序合成
 - 打粉机
 - 压缩机
 - 提取机
 - 金属成型机
 - 高炉

请注意，其中“金属成型机”对应的三个文件（剪切、碾压、挤压），以及高炉文件，都不会被真正的读取。因为这几个文件的内容都比较少，而字符串处理非常麻烦，为了降低代码量，我直接把数据写死在程序里了。

具体的文件内容可以看官方的注释。

请注意：

**有序合成和无序合成中，等号的左侧是产物，右侧是材料**

**但是其他几个文件中，等号的左侧是材料，右侧是产物**

<sub>别问我为什么，IC2作者就这么写的</sub>
